<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Logbook - Tanzania Education</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- LOGIN PAGE -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1>üáπüáø E-Logbook</h1>
                <p>Tanzania Education Management System</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="userType">Login As</label>
                    <select id="userType" required>
                        <option value="">Select Role</option>
                        <option value="teacher">Teacher</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>
        </div>
    </div>

    <!-- TEACHER DASHBOARD -->
    <div id="teacherDashboard" class="dashboard">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Teacher Portal</h2>
                <p id="teacherName">Welcome, Teacher</p>
            </div>
            <nav>
                <div class="nav-item active" data-section="teacher-overview">
                    <span class="nav-icon">üìä</span>
                    <span>Overview</span>
                </div>
                <div class="nav-item" data-section="teacher-lessons">
                    <span class="nav-icon">üìö</span>
                    <span>Lesson Plans</span>
                </div>
                <div class="nav-item" data-section="teacher-attendance">
                    <span class="nav-icon">‚úì</span>
                    <span>Attendance</span>
                </div>
                <div class="nav-item" data-section="teacher-students">
                    <span class="nav-icon">üë•</span>
                    <span>Student Records</span>
                </div>
                <div class="nav-item" data-section="teacher-reports">
                    <span class="nav-icon">üìÑ</span>
                    <span>Reports</span>
                </div>
            </nav>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </aside>

        <main class="main-content">
            <!-- Teacher Overview -->
            <div id="teacher-overview" class="feature-section active">
                <div class="content-header">
                    <h1>Dashboard Overview</h1>
                    <p>Welcome back! Here's your teaching summary.</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalLessons">0</div>
                        <div class="stat-label">Total Lessons</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalStudents">0</div>
                        <div class="stat-label">Total Students</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="attendanceRate">0%</div>
                        <div class="stat-label">Attendance Rate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="reportsSubmitted">0</div>
                        <div class="stat-label">Reports Submitted</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Recent Activity</h2>
                    </div>
                    <div id="recentActivity">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">No recent activity</p>
                    </div>
                </div>
            </div>

            <!-- Teacher Lessons -->
            <div id="teacher-lessons" class="feature-section">
                <div class="content-header">
                    <h1>Lesson Plans</h1>
                    <p>Create and manage your lesson plans</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">My Lesson Plans</h2>
                        <button class="btn-small btn-primary" onclick="openModal('lessonModal')">+ New Lesson</button>
                    </div>
                    <div id="lessonsList">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">No lessons created yet</p>
                    </div>
                </div>
            </div>

            <!-- Teacher Attendance -->
            <div id="teacher-attendance" class="feature-section">
                <div class="content-header">
                    <h1>Student Attendance</h1>
                    <p>Record and track student attendance</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Today's Attendance</h2>
                        <button class="btn-small btn-primary" onclick="openModal('attendanceModal')">+ Mark Attendance</button>
                    </div>
                    <div id="attendanceList">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">No attendance records</p>
                    </div>
                </div>
            </div>

            <!-- Teacher Students -->
            <div id="teacher-students" class="feature-section">
                <div class="content-header">
                    <h1>Student Records</h1>
                    <p>Manage student information and performance</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">My Students</h2>
                        <button class="btn-small btn-primary" onclick="openModal('studentModal')">+ Add Student</button>
                    </div>
                    <div class="table-container" id="studentsTable">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">No students registered</p>
                    </div>
                </div>
            </div>

            <!-- Teacher Reports -->
            <div id="teacher-reports" class="feature-section">
                <div class="content-header">
                    <h1>Reports & Analytics</h1>
                    <p>Submit reports and view analytics</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Submit Report</h2>
                        <button class="btn-small btn-primary" onclick="openModal('reportModal')">+ New Report</button>
                    </div>
                    <div id="reportsList">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">No reports submitted</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ADMIN DASHBOARD -->
    <div id="adminDashboard" class="dashboard">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Admin Portal</h2>
                <p>System Administrator</p>
            </div>
            <nav>
                <div class="nav-item active" data-section="admin-overview">
                    <span class="nav-icon">üìä</span>
                    <span>Overview</span>
                </div>
                <div class="nav-item" data-section="admin-teachers">
                    <span class="nav-icon">üë®‚Äçüè´</span>
                    <span>Teachers</span>
                </div>
                <div class="nav-item" data-section="admin-classes">
                    <span class="nav-icon">üè´</span>
                    <span>Classes</span>
                </div>
                <div class="nav-item" data-section="admin-analytics">
                    <span class="nav-icon">üìà</span>
                    <span>Analytics</span>
                </div>
                <div class="nav-item" data-section="admin-settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </div>
            </nav>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </aside>

        <main class="main-content">
            <!-- Admin Overview -->
            <div id="admin-overview" class="feature-section active">
                <div class="content-header">
                    <h1>System Overview</h1>
                    <p>Complete overview of the school management system</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="adminTotalTeachers">0</div>
                        <div class="stat-label">Total Teachers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="adminTotalClasses">0</div>
                        <div class="stat-label">Total Classes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="adminTotalStudents">0</div>
                        <div class="stat-label">Total Students</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="adminSystemHealth">100%</div>
                        <div class="stat-label">System Health</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">System Activity</h2>
                    </div>
                    <div id="adminActivity">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">System running smoothly</p>
                    </div>
                </div>
            </div>

            <!-- Admin Teachers -->
            <div id="admin-teachers" class="feature-section">
                <div class="content-header">
                    <h1>Teacher Management</h1>
                    <p>Manage teacher accounts and information</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">All Teachers</h2>
                        <button class="btn-small btn-primary" onclick="openModal('addTeacherModal')">+ Add Teacher</button>
                    </div>
                    <div id="teachersList">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">No teachers registered</p>
                    </div>
                </div>
            </div>

            <!-- Admin Classes -->
            <div id="admin-classes" class="feature-section">
                <div class="content-header">
                    <h1>Class Management</h1>
                    <p>Manage classes and class assignments</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">All Classes</h2>
                        <button class="btn-small btn-primary" onclick="openModal('classModal')">+ Add Class</button>
                    </div>
                    <div id="classesList">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">No classes created</p>
                    </div>
                </div>
            </div>

            <!-- Admin Analytics -->
            <div id="admin-analytics" class="feature-section">
                <div class="content-header">
                    <h1>System Analytics</h1>
                    <p>View detailed system analytics and reports</p>
                </div>

                <div class="card">
                    <h2 class="card-title">Performance Metrics</h2>
                    <div class="stats-grid" style="margin-top: 20px;">
                        <div class="stat-card">
                            <div class="stat-value">87%</div>
                            <div class="stat-label">Average Attendance</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">156</div>
                            <div class="stat-label">Lessons This Month</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">42</div>
                            <div class="stat-label">Reports Submitted</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Settings -->
            <div id="admin-settings" class="feature-section">
                <div class="content-header">
                    <h1>System Settings</h1>
                    <p>Configure system preferences and settings</p>
                </div>

                <div class="card">
                    <h2 class="card-title">General Settings</h2>
                    <form style="margin-top: 20px;">
                        <div class="form-group">
                            <label>School Name</label>
                            <input type="text" value="Tanzania Secondary School" placeholder="Enter school name">
                        </div>
                        <div class="form-group">
                            <label>Academic Year</label>
                            <input type="text" value="2025/2026" placeholder="Enter academic year">
                        </div>
                        <div class="form-group">
                            <label>Term</label>
                            <select>
                                <option>Term 1</option>
                                <option>Term 2</option>
                                <option>Term 3</option>
                            </select>
                        </div>
                        <button type="button" class="btn btn-primary">Save Settings</button>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <!-- MODALS -->
    <!-- Lesson Modal -->
    <div id="lessonModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create Lesson Plan</h2>
                <button class="close-modal" onclick="closeModal('lessonModal')">&times;</button>
            </div>
            <form id="lessonForm">
                <div class="form-group">
                    <label>Subject</label>
                    <input type="text" id="lessonSubject" placeholder="e.g., Mathematics" required>
                </div>
                <div class="form-group">
                    <label>Topic</label>
                    <input type="text" id="lessonTopic" placeholder="e.g., Algebra" required>
                </div>
                <div class="form-group">
                    <label>Class</label>
                    <input type="text" id="lessonClass" placeholder="e.g., Form 4A" required>
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="date" id="lessonDate" required>
                </div>
                <div class="form-group">
                    <label>Objectives</label>
                    <textarea id="lessonObjectives" placeholder="Enter lesson objectives" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save Lesson</button>
            </form>
        </div>
    </div>

    <!-- Attendance Modal -->
    <div id="attendanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Mark Attendance</h2>
                <button class="close-modal" onclick="closeModal('attendanceModal')">&times;</button>
            </div>
            <form id="attendanceForm">
                <div class="form-group">
                    <label>Class</label>
                    <input type="text" id="attendanceClass" placeholder="e.g., Form 4A" required>
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="date" id="attendanceDate" required>
                </div>
                <div class="form-group">
                    <label>Present Students</label>
                    <input type="number" id="presentStudents" placeholder="Number of students present" required>
                </div>
                <div class="form-group">
                    <label>Total Students</label>
                    <input type="number" id="totalStudentsAttendance" placeholder="Total students" required>
                </div>
                <button type="submit" class="btn btn-primary">Save Attendance</button>
            </form>
        </div>
    </div>

    <!-- Student Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Student</h2>
                <button class="close-modal" onclick="closeModal('studentModal')">&times;</button>
            </div>
            <form id="studentForm">
                <div class="form-group">
                    <label>Student Name</label>
                    <input type="text" id="studentName" placeholder="Full name" required>
                </div>
                <div class="form-group">
                    <label>Class</label>
                    <input type="text" id="studentClass" placeholder="e.g., Form 4A" required>
                </div>
                <div class="form-group">
                    <label>Registration Number</label>
                    <input type="text" id="studentReg" placeholder="Student registration number" required>
                </div>
                <button type="submit" class="btn btn-primary">Add Student</button>
            </form>
        </div>
    </div>

    <!-- Report Modal -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Submit Report</h2>
                <button class="close-modal" onclick="closeModal('reportModal')">&times;</button>
            </div>
            <form id="reportForm">
                <div class="form-group">
                    <label>Report Type</label>
                    <select id="reportType" required>
                        <option value="">Select type</option>
                        <option value="weekly">Weekly Report</option>
                        <option value="monthly">Monthly Report</option>
                        <option value="term">Term Report</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Subject</label>
                    <input type="text" id="reportSubject" placeholder="Subject name" required>
                </div>
                <div class="form-group">
                    <label>Details</label>
                    <textarea id="reportDetails" placeholder="Enter report details" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Submit Report</button>
            </form>
        </div>
    </div>

    <!-- Add Teacher Modal -->
    <div id="addTeacherModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Teacher</h2>
                <button class="close-modal" onclick="closeModal('addTeacherModal')">&times;</button>
            </div>
            <form id="addTeacherForm">
                <div class="form-group">
                    <label>Teacher Name</label>
                    <input type="text" id="teacherNameInput" placeholder="Full name" required>
                </div>
                <div class="form-group">
                    <label>Subject Specialization</label>
                    <input type="text" id="teacherSubject" placeholder="e.g., Mathematics" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="teacherEmail" placeholder="teacher@school.ac.tz" required>
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="tel" id="teacherPhone" placeholder="+255..." required>
                </div>
                <button type="submit" class="btn btn-primary">Add Teacher</button>
            </form>
        </div>
    </div>

    <!-- Class Modal -->
    <div id="classModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Class</h2>
                <button class="close-modal" onclick="closeModal('classModal')">&times;</button>
            </div>
            <form id="classForm">
                <div class="form-group">
                    <label>Class Name</label>
                    <input type="text" id="className" placeholder="e.g., Form 4A" required>
                </div>
                <div class="form-group">
                    <label>Class Teacher</label>
                    <input type="text" id="classTeacher" placeholder="Teacher name" required>
                </div>
                <div class="form-group">
                    <label>Number of Students</label>
                    <input type="number" id="classStudents" placeholder="Total students" required>
                </div>
                <button type="submit" class="btn btn-primary">Add Class</button>
            </form>
        </div>
    </div>

    <script>
        // APPLICATION STATE - This stores all our data in memory
        const appState = {
            currentUser: null,
            lessons: [],
            attendance: [],
            students: [],
            reports: [],
            teachers: [],
            classes: []
        };

        // LOGIN FUNCTIONALITY
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Prevents page reload on form submit
            
            const userType = document.getElementById('userType').value;
            const username = document.getElementById('username').value;
            
            // Store the current user info
            appState.currentUser = { type: userType, username: username };
            
            // Hide login page
            document.getElementById('loginPage').style.display = 'none';
            
            // Show the appropriate dashboard based on user type
            if (userType === 'teacher') {
                document.getElementById('teacherDashboard').classList.add('active');
                document.getElementById('teacherName').textContent = `Welcome, ${username}`;
                updateTeacherStats();
            } else if (userType === 'admin') {
                document.getElementById('adminDashboard').classList.add('active');
                updateAdminStats();
            }
        });

        // LOGOUT FUNCTIONALITY
        function logout() {
            // Hide all dashboards
            document.getElementById('teacherDashboard').classList.remove('active');
            document.getElementById('adminDashboard').classList.remove('active');
            
            // Show login page
            document.getElementById('loginPage').style.display = 'flex';
            
            // Reset form
            document.getElementById('loginForm').reset();
            appState.currentUser = null;
        }

        // NAVIGATION SYSTEM - Handles switching between different sections
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const section = this.getAttribute('data-section');
                
                // Remove active class from all nav items in this sidebar
                this.parentElement.querySelectorAll('.nav-item').forEach(nav => {
                    nav.classList.remove('active');
                });
                
                // Add active class to clicked item
                this.classList.add('active');
                
                // Hide all feature sections in the current dashboard
                const dashboard = this.closest('.dashboard');
                dashboard.querySelectorAll('.feature-section').forEach(sec => {
                    sec.classList.remove('active');
                });
                
                // Show the selected section
                dashboard.querySelector(`#${section}`).classList.add('active');
            });
        });

        // MODAL FUNCTIONS - Open and close modals
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Close modal when clicking outside of it
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // LESSON PLAN FORM HANDLER
        document.getElementById('lessonForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Create a lesson object from form data
            const lesson = {
                id: Date.now(), // Simple ID generation using timestamp
                subject: document.getElementById('lessonSubject').value,
                topic: document.getElementById('lessonTopic').value,
                class: document.getElementById('lessonClass').value,
                date: document.getElementById('lessonDate').value,
                objectives: document.getElementById('lessonObjectives').value
            };
            
            // Add to our state
            appState.lessons.push(lesson);
            
            // Update the display
            displayLessons();
            updateTeacherStats();
            
            // Close modal and reset form
            closeModal('lessonModal');
            this.reset();
        });

        // DISPLAY LESSONS FUNCTION
        function displayLessons() {
            const container = document.getElementById('lessonsList');
            
            if (appState.lessons.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">No lessons created yet</p>';
                return;
            }
            
            container.innerHTML = '';
            appState.lessons.forEach(lesson => {
                const lessonElement = document.createElement('div');
                lessonElement.className = 'list-item';
                lessonElement.innerHTML = `
                    <div class="list-item-content">
                        <h3>${lesson.subject} - ${lesson.topic}</h3>
                        <p>Class: ${lesson.class} | Date: ${lesson.date}</p>
                    </div>
                    <div class="list-item-actions">
                        <span class="badge badge-success">Planned</span>
                    </div>
                `;
                container.appendChild(lessonElement);
            });
        }

        // ATTENDANCE FORM HANDLER
        document.getElementById('attendanceForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const attendance = {
                id: Date.now(),
                class: document.getElementById('attendanceClass').value,
                date: document.getElementById('attendanceDate').value,
                present: parseInt(document.getElementById('presentStudents').value),
                total: parseInt(document.getElementById('totalStudentsAttendance').value)
            };
            
            appState.attendance.push(attendance);
            displayAttendance();
            updateTeacherStats();
            
            closeModal('attendanceModal');
            this.reset();
        });

        // DISPLAY ATTENDANCE
        function displayAttendance() {
            const container = document.getElementById('attendanceList');
            
            if (appState.attendance.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">No attendance records</p>';
                return;
            }
            
            container.innerHTML = '';
            appState.attendance.forEach(record => {
                const percentage = ((record.present / record.total) * 100).toFixed(1);
                const recordElement = document.createElement('div');
                recordElement.className = 'list-item';
                recordElement.innerHTML = `
                    <div class="list-item-content">
                        <h3>${record.class}</h3>
                        <p>Date: ${record.date} | ${record.present}/${record.total} students present</p>
                    </div>
                    <div class="list-item-actions">
                        <span class="badge badge-info">${percentage}%</span>
                    </div>
                `;
                container.appendChild(recordElement);
            });
        }

        // STUDENT FORM HANDLER
        document.getElementById('studentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const student = {
                id: Date.now(),
                name: document.getElementById('studentName').value,
                class: document.getElementById('studentClass').value,
                regNumber: document.getElementById('studentReg').value
            };
            
            appState.students.push(student);
            displayStudents();
            updateTeacherStats();
            
            closeModal('studentModal');
            this.reset();
        });

        // DISPLAY STUDENTS
        function displayStudents() {
            const container = document.getElementById('studentsTable');
            
            if (appState.students.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">No students registered</p>';
                return;
            }
            
            let tableHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Class</th>
                            <th>Reg. Number</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            appState.students.forEach(student => {
                tableHTML += `
                    <tr>
                        <td>${student.name}</td>
                        <td>${student.class}</td>
                        <td>${student.regNumber}</td>
                        <td><span class="badge badge-success">Active</span></td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody></table>';
            container.innerHTML = tableHTML;
        }

        // REPORT FORM HANDLER
        document.getElementById('reportForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const report = {
                id: Date.now(),
                type: document.getElementById('reportType').value,
                subject: document.getElementById('reportSubject').value,
                details: document.getElementById('reportDetails').value,
                date: new Date().toLocaleDateString()
            };
            
            appState.reports.push(report);
            displayReports();
            updateTeacherStats();
            
            closeModal('reportModal');
            this.reset();
        });

        // DISPLAY REPORTS
        function displayReports() {
            const container = document.getElementById('reportsList');
            
            if (appState.reports.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">No reports submitted</p>';
                return;
            }
            
            container.innerHTML = '';
            appState.reports.forEach(report => {
                const reportElement = document.createElement('div');
                reportElement.className = 'list-item';
                reportElement.innerHTML = `
                    <div class="list-item-content">
                        <h3>${report.type.toUpperCase()} - ${report.subject}</h3>
                        <p>Submitted: ${report.date}</p>
                    </div>
                    <div class="list-item-actions">
                        <span class="badge badge-success">Submitted</span>
                    </div>
                `;
                container.appendChild(reportElement);
            });
        }

        // UPDATE TEACHER STATISTICS
        function updateTeacherStats() {
            document.getElementById('totalLessons').textContent = appState.lessons.length;
            document.getElementById('totalStudents').textContent = appState.students.length;
            document.getElementById('reportsSubmitted').textContent = appState.reports.length;
            
            // Calculate average attendance rate
            if (appState.attendance.length > 0) {
                const totalAttendance = appState.attendance.reduce((sum, record) => {
                    return sum + (record.present / record.total);
                }, 0);
                const avgRate = ((totalAttendance / appState.attendance.length) * 100).toFixed(1);
                document.getElementById('attendanceRate').textContent = avgRate + '%';
            }
        }

        // ADMIN - ADD TEACHER FORM
        document.getElementById('addTeacherForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const teacher = {
                id: Date.now(),
                name: document.getElementById('teacherNameInput').value,
                subject: document.getElementById('teacherSubject').value,
                email: document.getElementById('teacherEmail').value,
                phone: document.getElementById('teacherPhone').value
            };
            
            appState.teachers.push(teacher);
            displayTeachers();
            updateAdminStats();
            
            closeModal('addTeacherModal');
            this.reset();
        });

        // DISPLAY TEACHERS
        function displayTeachers() {
            const container = document.getElementById('teachersList');
            
            if (appState.teachers.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">No teachers registered</p>';
                return;
            }
            
            container.innerHTML = '';
            appState.teachers.forEach(teacher => {
                const teacherElement = document.createElement('div');
                teacherElement.className = 'list-item';
                teacherElement.innerHTML = `
                    <div class="list-item-content">
                        <h3>${teacher.name}</h3>
                        <p>${teacher.subject} | ${teacher.email} | ${teacher.phone}</p>
                    </div>
                    <div class="list-item-actions">
                        <span class="badge badge-success">Active</span>
                    </div>
                `;
                container.appendChild(teacherElement);
            });
        }

        // ADMIN - ADD CLASS FORM
        document.getElementById('classForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const classData = {
                id: Date.now(),
                name: document.getElementById('className').value,
                teacher: document.getElementById('classTeacher').value,
                students: parseInt(document.getElementById('classStudents').value)
            };
            
            appState.classes.push(classData);
            displayClasses();
            updateAdminStats();
            
            closeModal('classModal');
            this.reset();
        });

        // DISPLAY CLASSES
        function displayClasses() {
            const container = document.getElementById('classesList');
            
            if (appState.classes.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">No classes created</p>';
                return;
            }
            
            container.innerHTML = '';
            appState.classes.forEach(classItem => {
                const classElement = document.createElement('div');
                classElement.className = 'list-item';
                classElement.innerHTML = `
                    <div class="list-item-content">
                        <h3>${classItem.name}</h3>
                        <p>Class Teacher: ${classItem.teacher} | Students: ${classItem.students}</p>
                    </div>
                    <div class="list-item-actions">
                        <span class="badge badge-info">${classItem.students} Students</span>
                    </div>
                `;
                container.appendChild(classElement);
            });
        }

        // UPDATE ADMIN STATISTICS
        function updateAdminStats() {
            document.getElementById('adminTotalTeachers').textContent = appState.teachers.length;
            document.getElementById('adminTotalClasses').textContent = appState.classes.length;
            
            // Calculate total students across all classes
            const totalStudents = appState.classes.reduce((sum, classItem) => sum + classItem.students, 0);
            document.getElementById('adminTotalStudents').textContent = totalStudents;
        }
    </script>
</body>
</html>



